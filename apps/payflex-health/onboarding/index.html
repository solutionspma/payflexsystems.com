<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Start Your PayFlex.Health Program</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f5f5f5; }
    .container { max-width: 800px; margin: 50px auto; padding: 40px; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    h1 { font-size: 32px; margin-bottom: 10px; }
    .subtitle { color: #666; margin-bottom: 30px; }
    .pricing-options { display: grid; gap: 20px; margin: 30px 0; }
    .pricing-option { border: 2px solid #e0e0e0; padding: 25px; border-radius: 8px; cursor: pointer; transition: all 0.2s; }
    .pricing-option:hover { border-color: #3bb2b8; }
    .pricing-option input[type="radio"] { margin-right: 15px; }
    .pricing-option.selected { border-color: #3bb2b8; background: #f0fdfa; }
    .pricing-option h3 { font-size: 24px; margin-bottom: 10px; }
    .pricing-option .price { font-size: 28px; font-weight: 700; color: #3bb2b8; margin: 10px 0; }
    .pricing-option ul { list-style: none; margin-top: 15px; }
    .pricing-option li { padding: 8px 0; color: #666; }
    .checkbox-label { display: flex; align-items: flex-start; margin: 30px 0; padding: 20px; background: #fff3cd; border-radius: 5px; }
    .checkbox-label input { margin-right: 15px; margin-top: 4px; }
    .btn { display: block; width: 100%; padding: 15px; background: #3bb2b8; color: #fff; border: none; border-radius: 5px; font-size: 18px; font-weight: 600; cursor: pointer; }
    .btn:hover { background: #2d9da3; }
    .btn:disabled { background: #ccc; cursor: not-allowed; }
  </style>
</head>
<body>

<div class="container">
  <h1>Start Your PayFlex.Health Program</h1>
  <p class="subtitle">Select your pricing tier and accept terms to continue to payment</p>

  <form id="onboardingForm" action="/checkout" method="POST">
    
    <div class="pricing-options">
      <label class="pricing-option">
        <input type="radio" name="plan" value="starter" required>
        <div>
          <h3>Starter</h3>
          <div class="price">$499/month</div>
          <ul>
            <li>✓ Platform access</li>
            <li>✓ Single program</li>
            <li>✓ Reporting dashboard</li>
            <li>✓ Email support</li>
          </ul>
        </div>
      </label>

      <label class="pricing-option">
        <input type="radio" name="plan" value="growth">
        <div>
          <h3>Growth</h3>
          <div class="price">$1,250/month</div>
          <ul>
            <li>✓ Multiple programs</li>
            <li>✓ Card issuing enabled</li>
            <li>✓ Advanced reporting</li>
            <li>✓ Priority support</li>
          </ul>
        </div>
      </label>

      <label class="pricing-option">
        <input type="radio" name="plan" value="scale">
        <div>
          <h3>Scale</h3>
          <div class="price">Starting at $2,500/month</div>
          <ul>
            <li>✓ High-volume programs</li>
            <li>✓ Custom configurations</li>
            <li>✓ Dedicated support</li>
            <li>✓ Custom integrations</li>
          </ul>
        </div>
      </label>
    </div>

    <label class="checkbox-label">
      <input type="checkbox" id="acceptTerms" required>
      <div>
        I agree to the <a href="/shared/legal/payflex-systems-tos.md" target="_blank">PayFlex Systems Terms of Service</a> 
        and <a href="/shared/legal/payflex-health-terms.md" target="_blank">PayFlex.Health Program Terms</a>.
        I understand that:
        <ul style="margin-top: 10px; margin-left: 20px;">
          <li>All fees are non-refundable</li>
          <li>PayFlex Systems owns and controls all payment infrastructure</li>
          <li>I cannot circumvent this platform for 24 months post-termination</li>
        </ul>
      </div>
    </label>

    <button type="submit" class="btn" id="submitBtn" disabled>Continue to Payment</button>
  </form>
</div>

<script>
  // Enable submit when plan selected and terms accepted
  const form = document.getElementById('onboardingForm');
  const submitBtn = document.getElementById('submitBtn');
  const acceptTerms = document.getElementById('acceptTerms');
  const planRadios = document.querySelectorAll('input[name="plan"]');

  function checkFormValid() {
    const planSelected = Array.from(planRadios).some(r => r.checked);
    const termsAccepted = acceptTerms.checked;
    submitBtn.disabled = !(planSelected && termsAccepted);
  }

  planRadios.forEach(radio => {
    radio.addEventListener('change', () => {
      // Remove selected class from all
      document.querySelectorAll('.pricing-option').forEach(opt => {
        opt.classList.remove('selected');
      });
      // Add to selected
      radio.closest('.pricing-option').classList.add('selected');
      checkFormValid();
    });
  });

  acceptTerms.addEventListener('change', checkFormValid);

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    
    // Log clickwrap acceptance
    const acceptanceData = {
      timestamp: new Date().toISOString(),
      ipAddress: 'CLIENT_IP', // Backend will capture
      userAgent: navigator.userAgent,
      termsVersion: 'v1.0_2026-01-05'
    };
    
    console.log('Clickwrap acceptance:', acceptanceData);
    
    // Continue to Stripe Checkout
    alert('Redirecting to Stripe Checkout...');
    // In production, this submits to backend which creates Stripe session
  });
</script>

</body>
</html>
